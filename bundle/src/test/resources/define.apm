DEFINE var 'global'
SHOW $var                           # should be 'global'
FOREACH i IN [1] BEGIN
  SHOW $var                         # should be 'global'
  DEFINE var '1. foreach'
  SHOW $var                         # 'global' shadowed by '1. foreach'
  FOREACH j IN [1]
  BEGIN
    DEFINE var '2. foreach'
    SHOW $var                       # '1. foreach' shadowed by '2. foreach'
  END
  SHOW $var                         # going back to '1. foreach'
END
SHOW $var                           # going back to 'global'

SEPARATE # only to separate logs

USE MACRO macro1
SHOW $var                           # should be 'global'

DEFINE MACRO macro1 BEGIN
  SHOW $var                         # macro doesn't see variables defined outside
  FOREACH i IN [1] BEGIN
    DEFINE var '1. macro'
    SHOW $var                       # should be '1. macro'
    FOREACH j IN [1]
    BEGIN
      DEFINE var '2. macro'
      SHOW $var                     # '1. macro' shadowed by '2. macro'
    END
    SHOW $var                       # going back to '1. macro'
  END
  SHOW $var                         # going back to '2. macro'
END
